import{_ as $}from"./bcc2.dc034942.js";import{o as _,c as u,b as s,f as D,F as h,r as x,g as H,w as v,v as g,n as A,t as k,d as E,u as f,i as I,h as T,a as w,j as S,k as y}from"./index.702f1b56.js";let B=(i=21)=>crypto.getRandomValues(new Uint8Array(i)).reduce((o,e)=>(e&=63,e<36?o+=e.toString(36):e<62?o+=(e-26).toString(36).toUpperCase():e>62?o+="-":o+="_",o),"");const F=s("h1",null,"Todo-list",-1),N=["onKeyup"],K={__name:"HomeHeader",emits:["AddTodoItem"],setup(i,{emit:o}){const e=t=>{const c={id:B(),title:t.target.value,done:!1,isEdit:!1};t.target.value===""?alert("\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A"):(o("AddTodoItem",c),t.target.value="")};return(t,c)=>(_(),u(h,null,[F,s("input",{type:"text",id:"ListInput",placeholder:"\u8BF7\u8F93\u5165\u4E8B\u9879",onKeyup:D(e,["enter"])},null,40,N)],64))}};const V={id:"doingThings"},U=["onClick"],J=["onKeyup","onBlur"],L={class:"operation"},M=["onClick"],R=["onClick","title"],z={__name:"HomeList",props:["todos"],emits:["CheckTodo","DelTodo"],setup(i,{emit:o}){const e={delTitle:"\u5220\u9664\u6B64\u4E8B\u9879",editTitle:"\u4FEE\u6539"};let t=x("");const c=l=>{o("CheckTodo",l),console.log(l.done)},p=l=>{confirm("\u662F\u5426\u5220\u9664\uFF1F")&&o("DelTodo",l)},m=x(null),n=l=>{t.value=l.title,l.isEdit=!0},d=l=>{l.isEdit=!1,t.value==""?(alert("\u8F93\u5165\u4E0D\u80FD\u4E3A\u7A7A"),t.value=l.title):l.title=t.value};return(l,C)=>(_(),u("ul",V,[(_(!0),u(h,null,H(i.todos,(a,Y)=>(_(),u("li",{key:a.id},[s("section",{class:"listTitle",onClick:r=>c(a)},[v(s("p",{class:A({checked:a.done})},k(a.title),3),[[g,!a.isEdit]]),v(s("input",{type:"text",class:"editInput","onUpdate:modelValue":C[0]||(C[0]=r=>I(t)?t.value=r:t=r),onKeyup:D(r=>d(a),["enter"]),onBlur:r=>d(a),ref_for:!0,ref_key:"inputTitle",ref:m},null,40,J),[[g,a.isEdit],[E,f(t)]])],8,U),s("div",L,[v(s("span",{class:"edit",onClick:r=>n(a)},"\uE602",8,M),[[g,!a.isEdit]]),s("span",{onClick:r=>p(a.id),title:e.delTitle,class:"del"},"\uE600",8,R)])]))),128))]))}};const q=(i,o)=>{const e=i.__vccOpts||i;for(const[t,c]of o)e[t]=c;return e},G={__name:"HomeFooter",props:["todos"],emits:["DeleteArray"],setup(i,{emit:o}){const e=i,t="\u5220\u9664\u5168\u90E8\u4E8B\u9879",c=e.todos,p=()=>{confirm("\u786E\u8BA4\u5168\u90E8\u5220\u9664\uFF1F")&&o("DeleteArray")},m=T(()=>{let n=0;return c.forEach(d=>{d.done&&n++}),n});return(n,d)=>(_(),u(h,null,[s("p",null,"\u5DF2\u5B8C\u6210 "+k(f(m))+" / \u5168\u90E8 "+k(i.todos.length),1),s("span",{onClick:p,title:t},"\uE628")],64))}},P=q(G,[["__scopeId","data-v-e0ce3478"]]);const Q={class:"container"},W={class:"containerMain"},X=s("img",{src:$,class:"background",alt:""},null,-1),j={__name:"Home",setup(i){let o=JSON.parse(localStorage.getItem("todos"))||[],e=w(o);const t=n=>{e.push(n)},c=n=>{n.done=!n.done},p=n=>{e.splice(n,1)},m=()=>{e.splice(0)};return S(()=>e,()=>{localStorage.setItem("todos",JSON.stringify(e))},{deep:!0,immediate:!0}),(n,d)=>(_(),u(h,null,[s("div",Q,[s("div",W,[y(K,{onAddTodoItem:t}),y(z,{todos:f(e),onCheckTodo:c,onDelTodo:p},null,8,["todos"]),y(P,{todos:f(e),onDeleteArray:m},null,8,["todos"])])]),X],64))}};export{j as default};
